{% extends "layouts/post_layout.html" %}


{% block title %} Editar Post |MiXDRiNKs {% endblock title %}


{% block content %}
 <form method="post" enctype="multipart/form-data" class="flex flex-col justify-center gap-4">
   {% csrf_token %}
   <div>
     <h1 class= "ml-32 text-4xl text-white font-bold mt-4">Actualizar Post: {{ form.instance.title }}</h1>
     <div class="ml-6 mt-16 flex  items-center text-md">{{ form.title.label_tag }} {{ form.title }}</div>
     <div class="ml-6 mt-6 flex items-center  text-md">{{ form.time.label_tag }} {{ form.time }}</div>
     <div class="ml-6 mt-6 flex items-center  text-md">{{ form.category.label_tag }} {{ form.category }}</div>
     <div class="ml-6 mt-6 flex  items-center text-md">{{ form.content.label_tag }} {{ form.content }}</div>
     <div class="ml-6 mt-6 flex gap-4">{{ form.allow_comments.label_tag }} {{ form.allow_comments }}</div>


     <div class="ml-4 flex flex-col gap-4">
       <h3 class="ml-6 mt-6 font-bold">>ImÃ¡genes cargadas</h3>
       {% for active_img in form.active_images %} 
         <p class="ml-6">  
            <a href="{{ active_img.image.url }}" target="_blank">
              <img class="inline-flex w-[200px] aspect-[16/9] object-cover"
                src="{{ active_img.image.url }}"
                alt="Portada {{ active_img.id }} del post"
              />
           </a>
            <input class="ml-4"
              type="checkbox"
              name="keep_image_{{ active_img.id }}"
              id="keep_image_{{ active_img.id }}"
              checked
            />
            <label for="keep_image_{{ active_img.id }}">Activa</label>
         </p>
       {% endfor %}
     </div>


     <h3 class="ml-4 mt-6 ">ðŸ—‡ Cargar nuevas imÃ¡genes</h3>
     <p><input  class="ml-6 mt-4" type="file" name="images" multiple /></p>
   </div>
   <div class="flex justify-center items-center mt-4 gap-4 gap-2">
       <a href="{% url 'post:post_detail' slug=form.instance.slug %}"
          class="bg-red-500 text-white p-2 rounded-md">Cancelar
       </a>
       <button type="submit" class="bg-blue-500 text-white p-2 rounded-md">Guardar cambios</button>
   </div>
 </form>
  {% comment %} <a href="javascript:history.back()">Cancelar</a> {% endcomment %}
{% endblock content %}

